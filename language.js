// Language translations
const languages = {
  en: {
    // Navigation
    nav_home: "Home",
    nav_features: "Features",
    nav_how_it_works: "How It Works",
    nav_generator: "Generator",

    // Hero Section
    hero_title: "AI-Powered Flashcard Generator",
    hero_subtitle: "Transform any content into interactive flashcards instantly. Upload PDFs, PowerPoints, or paste text - let AI create perfect study materials for you.",
    get_started: "Get Started Free",
    watch_demo: "Watch Demo",

    // Stats
    cards_generated: "Cards Generated",
    happy_students: "Happy Students",
    success_rate: "Success Rate",

    // Features
    features_title: "Powerful Features",
    features_subtitle: "Everything you need to create amazing flashcards",

    feature_ai_title: "AI Generation",
    feature_ai_desc: "Advanced AI automatically creates relevant questions and answers from your content",

    feature_upload_title: "Multi-Format Support",
    feature_upload_desc: "Upload PDFs, PowerPoint presentations, Word documents, or paste text directly",

    feature_study_title: "Smart Study Mode",
    feature_study_desc: "Interactive study sessions with progress tracking and performance analytics",

    feature_responsive_title: "Responsive Design",
    feature_responsive_desc: "Study anywhere, anytime on any device - desktop, tablet, or mobile",

    feature_save_title: "Save & Organize",
    feature_save_desc: "Create collections, save sets, and organize your study materials efficiently",

    feature_multilang_title: "Multi-Language",
    feature_multilang_desc: "Support for multiple languages to help learners worldwide",

    // How It Works
    how_it_works_title: "How It Works",
    how_it_works_subtitle: "Simple 3-step process to create amazing flashcards",

    step1_title: "Upload Content",
    step1_desc: "Upload your PDF, PowerPoint, or paste text content",

    step2_title: "AI Processing",
    step2_desc: "Our AI analyzes and creates relevant flashcards",

    step3_title: "Study & Learn",
    step3_desc: "Review, study, and track your progress",

    // Generator
    generator_title: "Create Your Flashcards",
    generator_subtitle: "Start generating flashcards right now",

    // Tabs
    tab_upload: "Upload File",
    tab_text: "Text Input",
    tab_view: "View Cards",
    tab_sets: "Saved Sets",

    // Upload
    upload_title: "Drag & Drop Files Here",
    upload_subtitle: "Or click to browse files",
    upload_types: "Supports PDF, PPTX, DOCX files",

    // Text Input
    text_placeholder: "Paste or type your study content here...",

    // Settings
    subject_label: "Subject/Topic",
    subject_placeholder: "e.g., Biology, History, Math...",
    num_cards_label: "Number of Cards",
    generate_btn: "Generate Flashcards",

    // Viewer
    total_cards: "Total Cards",
    current_card: "Current",
    progress: "Progress",
    study_mode: "Study Mode",
    edit_mode: "Edit Mode",
    exit_study: "Exit Study",

    // Card Controls
    flip_card: "Flip Card",
    prev_card: "Previous",
    next_card: "Next",

    // Study Mode
    your_answer: "Your Answer",
    answer_placeholder: "Type your answer here...",
    check_answer: "Check Answer",
    correct_answer: "Correct Answer",
    correct: "Correct",
    need_practice: "Need Practice",

    // Sets
    set_name_placeholder: "Enter set name...",
    save_set: "Save Set",
    your_sets: "Your Saved Sets",
    no_sets: "No saved sets yet",
    no_sets_desc: "Create and save some flashcards first!",
    sets_text: "sets",
    cards_text: "cards",
    view_btn: "View",
    study_btn: "Study",

    // Notifications
    file_uploaded: "File uploaded successfully",
    cards_generated: "Flashcards generated successfully",
    set_saved: "Set saved successfully",
    set_loaded: "Set loaded successfully",
    set_deleted: "Set deleted successfully",
    loading_text: "Generating flashcards...",

    // Errors
    error_file_type: "Please upload a PDF or PPTX file",
    error_no_content: "Please provide content to generate flashcards",
    error_set_name: "Please enter a set name",
    error_set_exists: "A set with this name already exists",
    error_no_cards: "No flashcards to save",
    error_generation: "Error generating flashcards. Please try again.",

    // Footer
    footer_tagline: "Transform your learning with AI-powered flashcards"
  },

  vi: {
    // Navigation
    nav_home: "Trang chủ",
    nav_features: "Tính năng",
    nav_how_it_works: "Cách hoạt động",
    nav_generator: "Tạo thẻ",

    // Hero Section
    hero_title: "Tạo Thẻ Học Bằng AI",
    hero_subtitle: "Chuyển đổi bất kỳ nội dung nào thành thẻ học tương tác ngay lập tức. Tải lên PDF, PowerPoint hoặc dán văn bản - để AI tạo tài liệu học tập hoàn hảo cho bạn.",
    get_started: "Bắt đầu miễn phí",
    watch_demo: "Xem demo",

    // Stats
    cards_generated: "Thẻ đã tạo",
    happy_students: "Học sinh hài lòng",
    success_rate: "Tỷ lệ thành công",

    // Features
    features_title: "Tính năng mạnh mẽ",
    features_subtitle: "Mọi thứ bạn cần để tạo thẻ học tuyệt vời",

    feature_ai_title: "Tạo bằng AI",
    feature_ai_desc: "AI tiên tiến tự động tạo câu hỏi và câu trả lời phù hợp từ nội dung của bạn",

    feature_upload_title: "Hỗ trợ nhiều định dạng",
    feature_upload_desc: "Tải lên file PDF, PowerPoint, Word, hoặc dán văn bản trực tiếp",

    feature_study_title: "Chế độ học thông minh",
    feature_study_desc: "Phiên học tương tác với theo dõi tiến độ và phân tích hiệu suất",

    feature_responsive_title: "Thiết kế responsive",
    feature_responsive_desc: "Học mọi lúc, mọi nơi trên bất kỳ thiết bị nào - máy tính, tablet hoặc điện thoại",

    feature_save_title: "Lưu & Sắp xếp",
    feature_save_desc: "Tạo bộ sưu tập, lưu bộ thẻ và sắp xếp tài liệu học tập hiệu quả",

    feature_multilang_title: "Đa ngôn ngữ",
    feature_multilang_desc: "Hỗ trợ nhiều ngôn ngữ để giúp người học trên toàn thế giới",

    // How It Works
    how_it_works_title: "Cách hoạt động",
    how_it_works_subtitle: "Quy trình 3 bước đơn giản để tạo thẻ học tuyệt vời",

    step1_title: "Tải nội dung",
    step1_desc: "Tải lên PDF, PowerPoint hoặc dán nội dung văn bản",

    step2_title: "Xử lý AI",
    step2_desc: "AI của chúng tôi phân tích và tạo thẻ học phù hợp",

    step3_title: "Học & Ôn tập",
    step3_desc: "Xem lại, học và theo dõi tiến độ của bạn",

    // Generator
    generator_title: "Tạo thẻ học của bạn",
    generator_subtitle: "Bắt đầu tạo thẻ học ngay bây giờ",

    // Tabs
    tab_upload: "Tải file",
    tab_text: "Nhập văn bản",
    tab_view: "Xem thẻ",
    tab_sets: "Bộ đã lưu",

    // Upload
    upload_title: "Kéo & thả file vào đây",
    upload_subtitle: "Hoặc click để chọn file",
    upload_types: "Hỗ trợ file PDF, PPTX, DOCX",

    // Text Input
    text_placeholder: "Dán hoặc nhập nội dung học tập của bạn vào đây...",

    // Settings
    subject_label: "Môn học/Chủ đề",
    subject_placeholder: "ví dụ: Sinh học, Lịch sử, Toán...",
    num_cards_label: "Số lượng thẻ",
    generate_btn: "Tạo thẻ học",

    // Viewer
    total_cards: "Tổng số thẻ",
    current_card: "Hiện tại",
    progress: "Tiến độ",
    study_mode: "Chế độ học",
    edit_mode: "Chế độ chỉnh sửa",
    exit_study: "Thoát học",

    // Card Controls
    flip_card: "Lật thẻ",
    prev_card: "Trước",
    next_card: "Tiếp",

    // Study Mode
    your_answer: "Câu trả lời của bạn",
    answer_placeholder: "Nhập câu trả lời của bạn vào đây...",
    check_answer: "Kiểm tra đáp án",
    correct_answer: "Đáp án đúng",
    correct: "Đúng",
    need_practice: "Cần luyện tập",

    // Sets
    set_name_placeholder: "Nhập tên bộ thẻ...",
    save_set: "Lưu bộ thẻ",
    your_sets: "Bộ thẻ đã lưu",
    no_sets: "Chưa có bộ thẻ nào",
    no_sets_desc: "Hãy tạo và lưu một số thẻ học trước!",
    sets_text: "bộ",
    cards_text: "thẻ",
    view_btn: "Xem",
    study_btn: "Học",

    // Notifications
    file_uploaded: "Tải file thành công",
    cards_generated: "Tạo thẻ học thành công",
    set_saved: "Lưu bộ thẻ thành công",
    set_loaded: "Tải bộ thẻ thành công",
    set_deleted: "Xóa bộ thẻ thành công",
    loading_text: "Đang tạo thẻ học...",

    // Errors
    error_file_type: "Vui lòng tải lên file PDF hoặc PPTX",
    error_no_content: "Vui lòng cung cấp nội dung để tạo thẻ học",
    error_set_name: "Vui lòng nhập tên bộ thẻ",
    error_set_exists: "Đã có bộ thẻ với tên này",
    error_no_cards: "Không có thẻ học nào để lưu",
    error_generation: "Lỗi tạo thẻ học. Vui lòng thử lại.",

    // Footer
    footer_tagline: "Chuyển đổi việc học của bạn với thẻ học được hỗ trợ bởi AI"
  }
};

class LanguageManager {
  constructor() {
    this.currentLanguage = localStorage.getItem('language') || 'en';
    this.translations = languages;
  }

  setLanguage(lang) {
    if (this.translations[lang]) {
      this.currentLanguage = lang;
      localStorage.setItem('language', lang);
      this.updateUI();
    }
  }

  getText(key, defaultText = '') {
    const translation = this.translations[this.currentLanguage];
    return translation && translation[key] ? translation[key] : defaultText || key;
  }

  updateUI() {
    // Update all elements with data-lang attributes
    document.querySelectorAll('[data-lang]').forEach(element => {
      const key = element.getAttribute('data-lang');
      const text = this.getText(key);

      if (element.tagName === 'INPUT' && element.type === 'text') {
        element.placeholder = text;
      } else if (element.tagName === 'TEXTAREA') {
        element.placeholder = text;
      } else {
        element.textContent = text;
      }
    });

    // Update specific elements by ID
    this.updateElementById('hero-title', 'hero_title');
    this.updateElementById('hero-subtitle', 'hero_subtitle');
    this.updateElementById('features-title', 'features_title');
    this.updateElementById('features-subtitle', 'features_subtitle');
    this.updateElementById('how-it-works-title', 'how_it_works_title');
    this.updateElementById('how-it-works-subtitle', 'how_it_works_subtitle');
    this.updateElementById('generator-title', 'generator_title');
    this.updateElementById('generator-subtitle', 'generator_subtitle');
  }

  updateElementById(elementId, textKey) {
    const element = document.getElementById(elementId);
    if (element) {
      element.textContent = this.getText(textKey);
    }
  }

  getCurrentLanguage() {
    return this.currentLanguage;
  }

  getAvailableLanguages() {
    return {
      'en': '🇺🇸 English',
      'vi': '🇻🇳 Tiếng Việt'
    };
  }
}

// Create global instance
const languageManager = new LanguageManager();

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { LanguageManager, languageManager };
} else {
  window.languageManager = languageManager;
}
